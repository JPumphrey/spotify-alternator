<!DOCTYPE html>
<html>
<head>
  <title>Spotify Controller</title>
</head>
<body>
  <h1>Spotify Controller</h1>

  <script src="token.js"></script>
  <script>
      var device_id = "";
    fetch(`https://api.spotify.com/v1/me/player/devices`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`
      },
    }).then(response => {
        return response.json()
    }).then(data => {
        device_id = data.devices[0].id
    });

    function playSong() {
        fetch(`https://api.spotify.com/v1/me/player/play?device_id=${device_id}`, {
        method: 'PUT',
        body: JSON.stringify({ uris: ['spotify:track:4SSnFejRGlZikf02HLewEF'] }),
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
        },
        }).then(response => {
            console.log(response.status)
        })
    }
  </script>

  <form><input type="button" onclick="playSong()" value="Play song"/></form>
</body>
</html>